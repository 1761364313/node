"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const constants_1 = require("../constants/constants");
const error_1 = require("../constants/error");
const utils_1 = require("./utils");
function getTrans(params, query, dbType) {
    let result;
    if (dbType === constants_1.PLATFORM_NAME.REDIS) {
        let temp = params;
        let key = [], method = 'get', ni = 0;
        if (utils_1.isArray(temp)) {
            for (let pa of temp) {
                switch (query.structure) {
                    case constants_1.REDIS_STRUCTURE.string:
                        key.push(pa);
                        if (ni > 0) {
                            method = 'mget';
                        }
                        else {
                            method = 'get';
                        }
                        ni++;
                        break;
                    default:
                        throw new Error(error_1.REDIS_SET_ERROR);
                }
            }
        }
        else {
            switch (query.structure) {
                case constants_1.REDIS_STRUCTURE.string:
                    key.push(temp);
                    method = 'get';
                    break;
                default:
                    throw new Error(error_1.REDIS_SET_ERROR);
            }
        }
        result = { key, method };
    }
    return result;
}
exports.default = getTrans;
